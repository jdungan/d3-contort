<!DOCTYPE html>

<html>
<head>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.3.13/d3.min.js" charset="utf-8"></script>

</head>
<body>

<h2>d3-contort.js</h2>
<svg height=300 width=400></svg>
<p>
<a href='https://github.com/jdungan/d3-contort'>It's on Github</a>
  
</p>

</body>

<script src='d3-contort.js'></script>

<script>

data = [1,2,3,4,5,6,7]
colors = ['red','blue','green','orange','purple','yellow','black']
nodes = d3.range(300).map(function() { return {rand: Math.random()}; })
color = d3.scale.category10();
    
svg=d3.select('svg')

g = svg.insert('g')
  .scale(1.5)
  .translate(150)
  .render()

g.selectAll('rect')
  .data(nodes)
  .enter()
  .append('rect')
  .attr({
    height:5,
    width:5,
    opacity:.1,
    'stroke':'black',
    'stroke-width':.05
  })
  .style("fill", function(d, i) { return color(i % 7); });

d3.selectAll('rect')
  .translate(function (d,i) {
    dirX=Math.random() > .5 ? 1 : -1
    dirY=Math.random() > .5 ? 1 : -1
    return {x:Math.random()*75*dirX,y:Math.random()*75*dirY}
  })
  .scale(function (d,i) {
    return d.rand * 3
  })
  .rotate(function (d,i) {
    return Math.random()*360
  })
  .skewX(function (d,i) {
    return Math.random()*360 % 25
  })
  .skewY(function (d,i) {
    return Math.random()*360 % 25
  })
  .animate({
    duration: function (d,i) {
      return Math.random()*5000
    },
    ease:'linear',
    opacity: function (d,i) {
      return Math.random()+.1
    },
  })

</script>

</html>
